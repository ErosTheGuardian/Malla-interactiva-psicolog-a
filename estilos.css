const cursos = [
  { codigo: "PSIC A002", nombre: "Procesos Cognitivos", semestre: 1, desbloquea: ["PSIC C001", "PSIC C002"] },
  { codigo: "PSIC A003", nombre: "Evolución Histórica de la Psicología", semestre: 1, desbloquea: ["PSIC E002", "PSIC F002"] },
  { codigo: "ASIGESAPOL", nombre: "Estrategias para el Aprendizaje", semestre: 1, desbloquea: [] },
  { codigo: "FILS 0001", nombre: "Antropología", semestre: 1, desbloquea: [] },
  { codigo: "PSIC A001", nombre: "Fundamentos Biológicos del Comportamiento", semestre: 1, desbloquea: [] },
  { codigo: "PSIC A004", nombre: "Fundamentos Filosóficos de la Psicología", semestre: 1, desbloquea: [] },
  { codigo: "PSIC A005", nombre: "Taller de Comunicación", semestre: 1, desbloquea: [] },
  { codigo: "FILS 0002", nombre: "Ética", semestre: 2, desbloquea: ["ELEFORIN01"] },
  { codigo: "PSIC B001", nombre: "Neuropsicología", semestre: 2, desbloquea: ["PSIC D005"] },
  { codigo: "PSIC B002", nombre: "Procesos Afectivos", semestre: 2, desbloquea: ["PSIC C001", "PSIC C002"] },
  { codigo: "PSIC B004", nombre: "Introducción a la Metodología de la Investigación", semestre: 2, desbloquea: ["PSIC C004"] },
  { codigo: "PSIC B003", nombre: "Fundamentos Socioantropológicos del Comportamiento", semestre: 2, desbloquea: [] },
  { codigo: "PSIC B005", nombre: "Taller de Trabajo Grupal", semestre: 2, desbloquea: [] }
  // Puedes continuar agregando todos los cursos de los semestres restantes aquí
];

const aprobados = new Set();

function crearMalla() {
  const container = document.getElementById("malla");
  container.innerHTML = "";
  for (let s = 1; s <= 10; s++) {
    const semestre = document.createElement("div");
    semestre.className = "semestre";
    const titulo = document.createElement("h2");
    titulo.textContent = `Semestre ${s}`;
    semestre.appendChild(titulo);

    cursos.filter(c => c.semestre === s).forEach(curso => {
      const boton = document.createElement("button");
      boton.textContent = `${curso.nombre} (${curso.codigo})`;
      boton.className = "curso bloqueado";
      boton.id = curso.codigo;
      boton.onclick = () => aprobarCurso(curso);
      semestre.appendChild(boton);
    });
    container.appendChild(semestre);
  }
  actualizarEstado();
}

function aprobarCurso(curso) {
  if (!botonHabilitado(curso.codigo)) return;
  aprobados.add(curso.codigo);
  actualizarEstado();
}

function botonHabilitado(codigo) {
  const curso = cursos.find(c => c.codigo === codigo);
  const requisitos = cursos.filter(c => c.desbloquea.includes(codigo));
  return requisitos.every(r => aprobados.has(r.codigo));
}

function actualizarEstado() {
  cursos.forEach(curso => {
    const btn = document.getElementById(curso.codigo);
    if (!btn) return;
    if (aprobados.has(curso.codigo)) {
      btn.className = "curso aprobado";
    } else if (botonHabilitado(curso.codigo)) {
      btn.className = "curso disponible";
    } else {
      btn.className = "curso bloqueado";
    }
  });
}

crearMalla();
